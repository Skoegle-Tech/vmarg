import{w as re,x as oe,r as f,z as te,A as I,D as _,H as L,j as e,J as ee,K as ae,P as H,M as se,N as ie,Q as ne,c as O,u as le,b as de,d as ce,e as me,L as pe,C as ue,B as c,i as U,T as l,n as Z,s as he,m as xe,R as $,E as Q,l as K,y as V,F as R,f as g,I as w,O as v,g as x,V as Y,k as J,h as y,S as fe}from"./index-DR6TpfK9.js";import{A as be,S as je,a as G,b as X}from"./ArrowBack-BMB8Gs_c.js";function ge(t){return re("MuiMobileStepper",t)}oe("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]);const we=t=>{const{classes:i,position:p}=t,b={root:["root",`position${ee(p)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return ae(b,ge,i)},ve=L(H,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:p}=t;return[i.root,i[`position${ee(p.position)}`]]}})(se(({theme:t})=>({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(t.vars||t).palette.background.default,padding:8,variants:[{props:({position:i})=>i==="top"||i==="bottom",style:{position:"fixed",left:0,right:0,zIndex:(t.vars||t).zIndex.mobileStepper}},{props:{position:"top"},style:{top:0}},{props:{position:"bottom"},style:{bottom:0}}]}))),ye=L("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(t,i)=>i.dots})({variants:[{props:{variant:"dots"},style:{display:"flex",flexDirection:"row"}}]}),Pe=L("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:t=>ie(t)&&t!=="dotActive",overridesResolver:(t,i)=>{const{dotActive:p}=t;return[i.dot,p&&i.dotActive]}})(se(({theme:t})=>({variants:[{props:{variant:"dots"},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"}},{props:{variant:"dots",dotActive:!0},style:{backgroundColor:(t.vars||t).palette.primary.main}}]}))),Ne=L(ne,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(t,i)=>i.progress})({variants:[{props:{variant:"progress"},style:{width:"50%"}}]}),Se=f.forwardRef(function(i,p){const b=te({props:i,name:"MuiMobileStepper"}),{activeStep:s=0,backButton:B,className:a,LinearProgressProps:P,nextButton:N,position:k="bottom",steps:n,variant:h="dots",slots:S={},slotProps:z={},...C}=b,j={...b,activeStep:s,position:k,variant:h};let u;h==="progress"&&(n===1?u=100:u=Math.ceil(s/(n-1)*100));const d=we(j),m={slots:S,slotProps:{progress:P,...z}},[D,T]=I("root",{ref:p,elementType:ve,shouldForwardComponentProp:!0,className:_(d.root,a),externalForwardedProps:{...m,...C},ownerState:j,additionalProps:{square:!0,elevation:0}}),[E,q]=I("dots",{className:d.dots,elementType:ye,externalForwardedProps:m,ownerState:j}),[W,F]=I("dot",{elementType:Pe,externalForwardedProps:m,ownerState:j}),[M,r]=I("progress",{className:d.progress,elementType:Ne,shouldForwardComponentProp:!0,externalForwardedProps:m,ownerState:j,additionalProps:{value:u,variant:"determinate"}});return e.jsxs(D,{...T,children:[B,h==="text"&&e.jsxs(f.Fragment,{children:[s+1," / ",n]}),h==="dots"&&e.jsx(E,{...q,children:[...new Array(n)].map((o,A)=>e.jsx(W,{...F,className:_(d.dot,F.className,A===s&&d.dotActive),dotActive:A===s},A))}),h==="progress"&&e.jsx(M,{...r}),N]})}),Ce=O(e.jsx("path",{fillRule:"evenodd",d:"m9 17 3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m4.47 8.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z"}),"HowToReg"),Ae=O(e.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft"),ke=O(e.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight");function Ie(){var M;const{signup:t}=le(),i=de(),p=ce(),b=me(p.breakpoints.down("sm")),[s,B]=f.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:""}),[a,P]=f.useState({}),[N,k]=f.useState(!1),[n,h]=f.useState(0),[S,z]=f.useState(!1),[C,j]=f.useState(!1),u=[{label:"Name",fields:["firstName","lastName"],icon:e.jsx($,{})},{label:"Contact",fields:["email","phoneNumber"],icon:e.jsx(Q,{})},{label:"Security",fields:["password","confirmPassword"],icon:e.jsx(K,{})}],d=((M=u[n])==null?void 0:M.fields)||[],m=r=>{const{name:o,value:A}=r.target;B({...s,[o]:A}),a[o]&&P({...a,[o]:null})},D=()=>{let r={},o=!0;return d.includes("firstName")&&!s.firstName.trim()&&(r.firstName="First name is required",o=!1),d.includes("lastName")&&!s.lastName.trim()&&(r.lastName="Last name is required",o=!1),d.includes("email")&&(s.email.trim()?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(s.email)||(r.email="Please enter a valid email address",o=!1):(r.email="Email is required",o=!1)),d.includes("phoneNumber")&&(s.phoneNumber.trim()?/^[0-9]{10}$/.test(s.phoneNumber)||(r.phoneNumber="Please enter a valid 10-digit phone number",o=!1):(r.phoneNumber="Phone number is required",o=!1)),d.includes("password")&&(s.password?s.password.length<6&&(r.password="Password must be at least 6 characters",o=!1):(r.password="Password is required",o=!1)),d.includes("confirmPassword")&&(s.confirmPassword?s.password!==s.confirmPassword&&(r.confirmPassword="Passwords do not match",o=!1):(r.confirmPassword="Please confirm your password",o=!1)),P(r),o},T=()=>{let r={};return s.firstName.trim()||(r.firstName="First name is required"),s.lastName.trim()||(r.lastName="Last name is required"),s.email.trim()?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(s.email)||(r.email="Please enter a valid email address"):r.email="Email is required",s.phoneNumber.trim()?/^[0-9]{10}$/.test(s.phoneNumber)||(r.phoneNumber="Please enter a valid 10-digit phone number"):r.phoneNumber="Phone number is required",s.password?s.password.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",P(r),Object.keys(r).length===0},E=()=>{D()&&h(r=>r+1)},q=()=>{h(r=>r-1)},W=async r=>{if(r.preventDefault(),T()){k(!0);try{const o=await t(s);o!=null&&o.valid?(V.success("Account created successfully!"),setTimeout(()=>i("/login"),2e3)):V.error((o==null?void 0:o.message)||"Registration failed. Please try again.")}catch(o){console.error("Signup error:",o),V.error("Registration failed. Please try again later.")}finally{k(!1)}}},F=r=>{switch(r){case 0:return e.jsx(R,{in:n===0,timeout:500,children:e.jsxs(c,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,color:"primary",children:"Let's get started with your name"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Please enter your first and last name as it appears on your official documents."}),e.jsxs(g,{fullWidth:!0,margin:"normal",error:!!a.firstName,children:[e.jsx(w,{htmlFor:"firstName",children:"First Name"}),e.jsx(v,{id:"firstName",name:"firstName",value:s.firstName,onChange:m,startAdornment:e.jsx(x,{position:"start",children:e.jsx($,{color:"action"})}),label:"First Name",autoFocus:!0}),a.firstName&&e.jsx(y,{children:a.firstName})]}),e.jsxs(g,{fullWidth:!0,margin:"normal",error:!!a.lastName,children:[e.jsx(w,{htmlFor:"lastName",children:"Last Name"}),e.jsx(v,{id:"lastName",name:"lastName",value:s.lastName,onChange:m,startAdornment:e.jsx(x,{position:"start",children:e.jsx($,{color:"action"})}),label:"Last Name"}),a.lastName&&e.jsx(y,{children:a.lastName})]})]})});case 1:return e.jsx(R,{in:n===1,timeout:500,children:e.jsxs(c,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,color:"primary",children:"Your contact information"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"We'll use these details to verify your account and keep you updated."}),e.jsxs(g,{fullWidth:!0,margin:"normal",error:!!a.email,children:[e.jsx(w,{htmlFor:"email",children:"Email Address"}),e.jsx(v,{id:"email",type:"email",name:"email",value:s.email,onChange:m,startAdornment:e.jsx(x,{position:"start",children:e.jsx(Q,{color:"action"})}),label:"Email Address",autoFocus:!0}),a.email&&e.jsx(y,{children:a.email})]}),e.jsxs(g,{fullWidth:!0,margin:"normal",error:!!a.phoneNumber,children:[e.jsx(w,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(v,{id:"phoneNumber",name:"phoneNumber",value:s.phoneNumber,onChange:m,startAdornment:e.jsx(x,{position:"start",children:e.jsx(fe,{color:"action"})}),label:"Phone Number"}),a.phoneNumber&&e.jsx(y,{children:a.phoneNumber})]})]})});case 2:return e.jsx(R,{in:n===2,timeout:500,children:e.jsxs(c,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,color:"primary",children:"Create a secure password"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Your password should be at least 6 characters long and include a mix of letters and numbers."}),e.jsxs(g,{fullWidth:!0,margin:"normal",error:!!a.password,children:[e.jsx(w,{htmlFor:"password",children:"Password"}),e.jsx(v,{id:"password",type:S?"text":"password",name:"password",value:s.password,onChange:m,startAdornment:e.jsx(x,{position:"start",children:e.jsx(K,{color:"action"})}),endAdornment:e.jsx(x,{position:"end",children:e.jsx(U,{"aria-label":"toggle password visibility",onClick:()=>z(!S),edge:"end",children:S?e.jsx(Y,{}):e.jsx(J,{})})}),label:"Password",autoFocus:!0}),a.password&&e.jsx(y,{children:a.password})]}),e.jsxs(g,{fullWidth:!0,margin:"normal",error:!!a.confirmPassword,children:[e.jsx(w,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(v,{id:"confirmPassword",type:C?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:m,startAdornment:e.jsx(x,{position:"start",children:e.jsx(K,{color:"action"})}),endAdornment:e.jsx(x,{position:"end",children:e.jsx(U,{"aria-label":"toggle confirm password visibility",onClick:()=>j(!C),edge:"end",children:C?e.jsx(Y,{}):e.jsx(J,{})})}),label:"Confirm Password"}),a.confirmPassword&&e.jsx(y,{children:a.confirmPassword})]})]})});case 3:return e.jsx(R,{in:n===3,timeout:500,children:e.jsxs(c,{sx:{textAlign:"center",py:2},children:[e.jsx(Ce,{color:"success",sx:{fontSize:60,mb:2}}),e.jsx(l,{variant:"h5",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Ready to create your account"}),e.jsx(l,{variant:"body1",sx:{mb:2},children:"Please review your information before submitting:"}),e.jsxs(H,{variant:"outlined",sx:{p:2,mb:3,bgcolor:"background.default"},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Name:"}),e.jsxs(l,{variant:"body2",children:[s.firstName," ",s.lastName]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Email:"}),e.jsx(l,{variant:"body2",children:s.email})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(l,{variant:"body2",color:"text.secondary",children:"Phone:"}),e.jsx(l,{variant:"body2",children:s.phoneNumber})]})]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:'By clicking "Create Account", you agree to our Terms of Service and Privacy Policy.'})]})});default:return null}};return e.jsx(pe,{title:"Vmarg - Sign Up",children:e.jsxs(ue,{maxWidth:"sm",sx:{py:{xs:2,sm:4}},children:[e.jsxs(c,{sx:{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(U,{onClick:()=>i("/login"),sx:{color:"primary.main"},children:e.jsx(be,{})}),e.jsx(l,{variant:"h5",component:"h1",fontWeight:"bold",textAlign:"center",sx:{flex:1},children:"Create Account"}),e.jsx(c,{sx:{width:40}})," "]}),e.jsxs(H,{elevation:2,sx:{borderRadius:2,overflow:"hidden",backgroundColor:"background.paper"},children:[!b&&e.jsxs(je,{activeStep:n,alternativeLabel:!0,sx:{pt:3,pb:2,px:2,bgcolor:"background.subtle"},children:[u.map((r,o)=>e.jsx(G,{children:e.jsx(X,{StepIconProps:{icon:o===n?r.icon:o<n?"✓":o+1},children:r.label})},r.label)),e.jsx(G,{children:e.jsx(X,{children:"Review"})},"review")]}),e.jsxs(c,{sx:{p:3},children:[F(n),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(Z,{variant:"outlined",onClick:q,disabled:n===0,startIcon:e.jsx(Ae,{}),children:"Back"}),n===u.length?e.jsx(Z,{variant:"contained",onClick:W,disabled:N,startIcon:N?e.jsx(he,{size:20}):null,sx:{backgroundColor:"#00796b","&:hover":{backgroundColor:"#00635a"},px:3},children:N?"Creating Account...":"Create Account"}):e.jsx(Z,{variant:"contained",onClick:E,endIcon:e.jsx(ke,{}),sx:{backgroundColor:"#00796b","&:hover":{backgroundColor:"#00635a"}},children:n===u.length-1?"Review":"Next"})]})]}),b&&e.jsx(Se,{variant:"dots",steps:u.length+1,position:"static",activeStep:n,sx:{bgcolor:"background.default"},nextButton:e.jsx("div",{}),backButton:e.jsx("div",{})})]}),e.jsx(c,{sx:{mt:3,textAlign:"center"},children:e.jsxs(l,{variant:"body2",children:["Already have an account?"," ",e.jsx(xe,{to:"/login",style:{color:p.palette.primary.main,textDecoration:"none",fontWeight:"bold"},children:"Log in"})]})})]})})}export{Ie as default};
